{% extends "base.html" %}

{% block title %}{{ _("Search results for '%s'") % pattern }}{% end block %}

{% block body %}
	<ul class="breadcrumb">
		<li>
			<a href="/">{{ _("Home") }}</a>
			<span class="divider">/</span>
		</li>
		<li>
			<a href="/search">{{ _("Search results") }}</a>
			<span class="divider">/</span>
		</li>
		<li class="active">
			<a href="/search?q={{ pattern }}">{{ pattern }}</a>
		</li>
	</ul>

	<div class="page-header">
		<h1>
			{{ _("Search results for '%s'") % pattern }}
		</h1>
	</div>

	{% if not pkgs and not files and not users %}
		<div class="alert alert-block">
			<h4 class="alert-heading">{{ _("No results found.") }}</h4>
			<a href="/search">
				{{ _("Visit the advanced search page to find about how to define your query.") }}
			</a>
		</div>
	{% end %}

	<div class="row">
		<div class="span4 offset4">
			<form class="well form-search" method="GET" action="/search">
				<input type="text" class="input-medium search-query" name="q" value="{{ pattern }}">
				<button type="submit" class="btn">{{ _("Search") }}</button>
			</form>
		</div>
	</div>

	{% if pkgs %}
		<div class="row">
			<div class="span10 offset1">
				<h2>
					{{ _("Packages") }}
					<small>({{ len(pkgs) }})</small>
				</h2>

				<table class="table table-striped">
					<tbody>
						{% for pkg in pkgs %}
							<tr>
								<td>
									<a href="/package/{{ pkg.name }}">
										{{ pkg.name }}
									</a>
								</td>
								<td>{{ pkg.summary }}</td>
							</tr>
						{% end %}
					</tbody>
				</table>
			</div>
		</div>
	{% end %}

	{% if files %}
		<div class="row">
			<div class="span10 offset1">
				<h2>
					{{ _("Files") }}
					<small>({{ len(files) }})</small>
				</h2>

				<p>
					{{ _("%s was found in the following package.", "%s was found in the following packages.", len(files)) % pattern }}
				</p>

				<table class="table table-striped">
					<tbody>
						{% for pkg, file in files %}
							<tr>
								<td>
									<a href="/package/{{ pkg.uuid }}">{{ pkg.friendly_name }}</a>
								</td>
								<td>
									<pre>{{ format_filemode(file.type, file.mode) }} {{ file.user }}:{{ file.group }} {% if file.size %}{{ format_size(file.size) }}{% else %}-{% end %} {{ file.name }}</pre>
								</td>
							</tr>
						{% end %}
					</tbody>
				</table>
			</div>
		</div>
	{% end %}

	{% if users %}
		<div class="row">
			<div class="span10 offset1">
				<h2>
					{{ _("Users") }}
					<small>({{ len(users) }})</small>
				</h2>

				<table class="table table-striped">
					<tbody>
						{% for user in users %}
							<tr>
								<td>
									<a href="/user/{{ user.name }}">{{ user.realname }}
										{% if not user.name == user.realname %}
											({{ user.name }})
										{% end %}
									</a>
								</td>
								<td>
									&nbsp;
								</td>
							</tr>
						{% end %}
					</tbody>
				</table>
			</div>
		</div>
	{% end %}
{% end block %}
