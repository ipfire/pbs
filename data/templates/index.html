{% extends "base.html" %}

{% block title %}{{ _("Welcome to the Pakfire Build Service") }}{% end block %}

{% block body %}
	{% if current_user %}
		<div class="page-header">
			<h2>{{ _("Welcome, %s!") % current_user.firstname }}</h2>
		</div>


	{% else %}
		<div class="hero-unit ac" style="background-color: white">
			<h1>
				{{ _("Pakfire Build Service") }}<br>
				<small>{{ _("Development powered by community!") }}</small>
			</h1>

			<br><br>

			<a class="btn" href="/documents">{{ _("Learn more") }} &raquo;</a>
		</div>

		<hr>
	{% end %}

	{% if updates %}
		<div class="row">
			<div class="span12">
				<div class="tabbable">
					<ul class="nav nav-tabs">
						{% for type, updts, active in updates %}
							<li {% if active %}class="active"{% end %}>
								<a href="#updates_{{ type }}" data-toggle="tab">
									{% if type == "stable" %}
										{{ _("Latest stable updates") }}
									{% elif type == "unstable" %}
										{{ _("Unstable updates") }}
									{% elif type == "testing" %}
										{{ _("Testing updates") }}
									{% end %}
								</a>
							</li>
						{% end %}
					</ul>

					<div class="tab-content">
						{% for type, updts, active in updates %}
							<div class="tab-pane {% if active %}active{% end %}" id="updates_{{ type }}">
								{% module UpdatesTable(updts) %}
							</div>
						{% end %}
					</div>
				</div>

				<p class="pull-right">
					<a href="/updates">{{ _("View more updates...") }}</a>
				</p>

				<hr style="clear: both;">
			</div>
		</div>
	{% end %}

	<div class="row">
		<div class="span6">
			{% if active_jobs %}
				<h3>
					{{ _("Ongoing build jobs") }}
					<small>({{ len(active_jobs) }})</small>
				</h3>
				{% module JobsList(active_jobs, show_builder=True) %}
			{% end %}

			<a href="/builds/queue">
				{% if job_queue %}
					{{ _("There is one job in the job queue.", "There are %(num)s jobs in the job queue.", job_queue) % { "num" : job_queue } }}
				{% else %}
					{{ _("There are no jobs in the job queue.") }}
				{% end %}
			</a>
		</div>

		<div class="span6">
			<h3>{{ _("Lately processed jobs") }}</h3>
			{% module JobsList(latest_jobs) %}
		</div>
	</div>
{% end %}
