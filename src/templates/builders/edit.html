{% extends "../base.html" %}

{% block title %}{{ _("Manage builder %s") % builder.hostname }}{% end block %}

{% block body %}
	<ul class="breadcrumb">
		<li>
			<a href="/">{{ _("Home") }}</a>
			<span class="divider">/</span>
		</li>
		<li>
			<a href="/builders">{{ _("Builders") }}</a>
			<span class="divider">/</span>
		</li>
		<li>
			<a href="/builder/{{ builder.name }}">{{ builder.name }}</a>
			<span class="divider">/</span>
		</li>
		<li class="active">
			<a href="/builder/{{ builder.name }}/edit">{{ _("Manage") }}</a>
		</li>
	</ul>

	<div class="page-header">
		<h2>{{ _("Builder: %s") % builder.hostname }} <small>{{ _("Manage") }}</small></h2>
	</div>

	<form class="form-horizontal" method="POST" action="">
		{% raw xsrf_form_html() %}
		<fieldset>
			<div class="control-group">
				<label class="control-label">{{ _("Hostname") }}</label>
				<div class="controls">
					<span class="input-xlarge uneditable-input">{{ builder.hostname }}</span>
					<p class="help-block">
						{{ _("The hostname cannot be changed.") }}
					</p>
				</div>
			</div>

			<div class="control-group">
				<label class="control-label" for="enabled">{{ _("Enabled") }}</label>
				<div class="controls">
					<label class="checkbox">
						<input type="checkbox" id="enabled" name="enabled" {% if builder.enabled %}checked="checked"{% end %}>
						{{ _("The builder must be enabled in order to process build jobs.") }}
					</label>
				</div>
			</div>
		</fieldset>

		<fieldset>
			<legend>{{ _("Build job settings") }}</legend>

			<div class="control-group">
				<label class="control-label" for="max_jobs">{{ _("Maximum number of parallel build jobs") }}</label>
				<div class="controls">
					<select id="max_jobs" name="max_jobs">
						{% for i in range(1, (2 * builder.cpu_count) + 1) %}
							<option value="{{ i }}" {% if i == builder.max_jobs %}selected="selected"{% end %}>{{ i }}</option>
						{% end %}
					</select>

					<p class="help-block">
						{{ _("This is the number of build jobs that are started in parallel.") }}
					</p>
				</div>
			</div>

			<div class="control-group">
				<div class="controls">
					<label class="checkbox">
						<input type="checkbox" name="testmode" {%if builder.testmode %}checked{% end %}>
						{{ _("Test Mode") }}
					</label>
				</div>
			</div>

			<div class="form-actions">
				<button type="submit" class="btn btn-primary">{{ _("Save changes") }}</button>
			</div>
		</fieldset>
	</form>
{% end block %}
